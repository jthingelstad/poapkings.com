# poapkings.com

Static multi-page site for the POAP KINGS Clash Royale clan. The site is plain HTML/CSS/JS with no build step.

## Project layout
- `index.html`: Home page with primary clan overview and call-to-action.
- `roster/index.html`: Dedicated roster page (`/roster`).
- `members/index.html`: "King's Keep" onboarding/resources page (`/members`).
- `styles.css`: All styling.
- `app.js`: Client-side script that loads/renders roster data and handles roster filtering.
- `roster.json`: Public roster data consumed by `app.js` (auto-generated by sync script).
- `roster-extra.json`: Manually-maintained custom member data (POAP wallets, profile URLs, notes, join dates). Keyed by player tag (without `#`).
- `scripts/sync-roster.py`: Python 3 script that fetches the Clash Royale API and merges with `roster-extra.json` to produce `roster.json`.
- `.env`: Local API key storage (gitignored). Contains `CR_API_KEY=...`.
- `assets/`: Static assets (logo, local font file).
- `CNAME`: Custom domain for GitHub Pages.

## Key behaviors
- `app.js` fetches `/roster.json` with `cache: "no-store"`.
- Roster page supports search + role filtering.
- Each roster row can render links for:
  - RoyaleAPI (from `tag`)
  - Profile (`profile_url`, optional)
  - POAP (`address`, optional; ENS or ETH address)
- Player tags in `roster.json` can be with or without `#`; the UI normalizes them.
- `date_joined` is optional and shown as "Joined ..."; ISO format (`YYYY-MM-DD`) is recommended.
- Pages share the same top navigation across Home, Roster, and King's Keep.

## Roster schema
`roster.json` is auto-generated by the sync script and contains:

```json
{
  "updated": "YYYY-MM-DD",
  "members": [
    {
      "name": "Display Name",
      "tag": "20JJJ2CCRU",
      "role": "Leader",
      "exp_level": 15,
      "trophies": 6200,
      "arena": "Champion",
      "clan_rank": 1,
      "donations": 42,
      "donations_received": 10,
      "last_seen": "20260215T120000.000Z",
      "note": "Founder",
      "profile_url": "https://example.com",
      "address": "name.eth",
      "date_joined": "2025-12-01"
    }
  ]
}
```

API-sourced fields: `name`, `tag`, `role`, `exp_level`, `trophies`, `arena`, `clan_rank`, `donations`, `donations_received`, `last_seen`.
Custom fields (from `roster-extra.json`): `note`, `profile_url`, `address`, `date_joined`.

## Updating the roster
1. Run `python3 scripts/sync-roster.py` to fetch from Clash Royale API and write `roster.json`.
2. Edit `roster-extra.json` for custom member data (POAP wallets, profile URLs, notes, join dates). Do **not** hand-edit `roster.json`.
3. New members not in `roster-extra.json` get `date_joined` set to today automatically.
4. API key is stored in `.env` (gitignored) as `CR_API_KEY=...`.
5. If the API key fails with an IP error, the script prints the rejected IP to whitelist at developer.clashroyale.com.

```bash
python3 scripts/sync-roster.py
git add roster.json && git commit -m "Sync roster" && git push
```

## Local preview
Serve the folder with a static server (recommended), for example:

```bash
python3 -m http.server 8000
```

Then open:
- `/` (Home)
- `/roster`
- `/members`

## Notes
- No build tooling or dependencies.
- Google Fonts are loaded on each page; remove those `<link>` tags for fully offline hosting.
